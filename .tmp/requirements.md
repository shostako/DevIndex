# DevIndex - 要件定義書

**作成日**: 2025-11-24
**バージョン**: 2.0（完全再構想版）
**ステータス**: Phase 1-3 統合設計

---

## 1. プロジェクト概要

### 1.1 目的
エンジニアが技術用語を**効率的に学習し、長期記憶に定着させる**ための学習支援Webアプリケーション。

### 1.2 解決する課題
- **断片的な知識**: 調べた用語をその場限りで忘れてしまう
- **体系的理解の欠如**: 関連用語の繋がりが見えない
- **復習の仕組み不在**: 記憶定着のための計画的な復習ができない
- **学習進捗の不可視**: 自分が何をどこまで理解しているか分からない

### 1.3 コアバリュー
1. **速度**: 知りたい情報に瞬時（0.1秒以内）にアクセス
2. **オフライン**: ネット環境に依存しない学習体験
3. **継続性**: 復習スケジュールで記憶を長期定着
4. **可視化**: 学習進捗と理解度を明確に把握

---

## 2. ユーザーペルソナ

### ペルソナ1: 駆け出しエンジニア（初心者）
- **年齢**: 20代前半
- **背景**: プログラミング学習開始から6ヶ月
- **課題**:
  - 技術用語が多すぎて覚えられない
  - 調べても数日後には忘れている
  - 何を優先的に覚えるべきか分からない
- **期待**:
  - 基礎用語を確実に記憶に定着させたい
  - 通勤時間にスマホで復習したい
  - 進捗が見えるとモチベーションが上がる

### ペルソナ2: 中級エンジニア（学習継続者）
- **年齢**: 20代後半〜30代
- **背景**: 実務経験2-3年、新技術を継続学習中
- **課題**:
  - 新しいフレームワーク・ツールの用語が覚えきれない
  - 調べた内容を後で再確認したいが、どこで見たか忘れる
  - 体系的な復習の仕組みがない
- **期待**:
  - カテゴリー別に効率的に学習したい
  - オフラインでも使えるツールが欲しい
  - 自分の理解度を客観的に測りたい

---

## 3. UI/UX要件（最重要）

### 3.1 UI/UX設計原則
1. **速度至上主義**: すべての操作が瞬時に完了する
2. **キーボード駆動**: マウス不要で全操作が可能
3. **情報密度の最適化**: 一画面で必要な情報が揃う
4. **進捗の可視化**: 学習状況が常に見える
5. **モード間のシームレス遷移**: 辞書↔クイズ↔復習を流動的に

### 3.2 画面構成

#### 全体レイアウト
```
┌───────────────────────────────────────────┐
│ DevIndex  [辞書|クイズ|復習]  習得率:72% │ ← ヘッダー（常時表示）
├───────────────────────────────────────────┤
│ 🔍 [検索バー] (Ctrl+K)                    │ ← グローバル検索
├───────────────────────────────────────────┤
│ ┌──────┬────────────────────────────────┐ │
│ │      │ [メインコンテンツエリア]       │ │
│ │ 📂   │ - 辞書モード: カード型一覧    │ │
│ │ カテ │ - クイズモード: 問題画面      │ │
│ │ ゴリ │ - 復習モード: 今日の予定      │ │
│ │      │                               │ │
│ │ 📊   │                               │ │
│ │ 統計 │                               │ │
│ └──────┴────────────────────────────────┘ │
│ ┌─────────────────────────────────────┐   │
│ │ 今日の復習: 5語  連続日数: 7日     │   │ ← プログレスバー
│ └─────────────────────────────────────┘   │
└───────────────────────────────────────────┘
```

### 3.3 Phase別UI詳細

#### Phase 1: 辞書モード
**画面**: 用語一覧 → 詳細モーダル

**用語一覧の表示形式**:
- **カード型レイアウト**: 3カラムグリッド（タブレット: 2カラム、スマホ: 1カラム）
- **カード情報**: 用語名、読み仮名、短い説明、カテゴリーバッジ、難易度
- **視覚的手がかり**:
  - 未学習: グレー
  - 学習中: オレンジ
  - 習得済み: グリーン

**検索機能**:
- **リアルタイムフィルタ**: 入力と同時に結果更新（50ms以内）
- **あいまい検索**: タイポや類似語にも対応（Fuse.js）
- **複合フィルタ**: カテゴリー × 難易度 × 学習状態

**詳細モーダル**:
- **表示内容**:
  - 用語名・読み
  - 詳細説明（マークダウン対応）
  - コード例（シンタックスハイライト）
  - 関連タグ
  - 学習履歴（復習回数、正答率）
- **操作**:
  - 「クイズに追加」ボタン
  - 「復習予定に追加」ボタン
  - Escで閉じる

**キーボードショートカット**:
- `/` or `Ctrl+K`: 検索フォーカス
- `↑/↓`: カード選択移動
- `Enter`: 詳細モーダル表示
- `Esc`: モーダルを閉じる

#### Phase 2: クイズモード
**画面**: 設定 → 出題 → 結果

**クイズ設定画面**:
- **出題範囲選択**:
  - すべて
  - カテゴリー指定
  - 弱点補強（正答率低い順）
  - ランダム10問
- **難易度選択**: 初級・中級・上級・混合
- **タイマー設定**: ON/OFF、制限時間

**問題画面（カード型UI）**:
```
┌─────────────────────────────┐
│     問題 3/10               │
│                             │
│   【フロントカード】         │
│                             │
│      REST API               │
│                             │
│   [カードをめくる]           │
│                             │
└─────────────────────────────┘

↓ めくり後

┌─────────────────────────────┐
│     問題 3/10               │
│                             │
│   Representational State... │
│   （詳細説明表示）           │
│                             │
│   [完全に覚えた]             │
│   [なんとなく覚えた]         │
│   [忘れた]                   │
└─────────────────────────────┘
```

**操作**:
- スペースキー: カードをめくる
- 1/2/3キー: 記憶度選択
- `Esc`: クイズ中断

**即時フィードバック**:
- 正解時: 緑色のアニメーション + 詳細説明表示
- 不正解時: 赤色のアニメーション + 正解と解説表示
- 所要時間表示

**結果画面**:
- スコア（正答率）
- 所要時間
- 苦手な用語リスト（復習予定に追加ボタン）
- 習得度グラフ

#### Phase 3: 復習モード（SRS）
**画面**: 今日の復習 → 復習実行 → 統計ダッシュボード

**今日の復習リスト**:
- **カレンダービュー**: 今後7日間の復習予定を可視化
- **優先度表示**:
  - 期限切れ（赤）
  - 今日（オレンジ）
  - 今後（グレー）
- **ワンクリック開始**: 「今日の復習を始める」ボタン

**復習実行**:
- クイズモードと同じカード型UI
- ただし、結果によって次回復習日が動的に変化
- **評価スケール**:
  - 0: 完全に忘れた → 1日後
  - 1: かすかに覚えていた → 1日後
  - 2: 思い出すのに苦労した → 3日後
  - 3: 正解だが迷った → 7日後
  - 4: 正解・確信あり → 14日後
  - 5: 完璧 → 30日後

**統計ダッシュボード**:
- **習得率**: 全用語のうち習得済みの割合（円グラフ）
- **学習継続日数**: 連続復習日数（ストリーク）
- **カテゴリー別理解度**: カテゴリーごとの正答率（棒グラフ）
- **復習予定**: 今後30日間の復習予定数（折れ線グラフ）
- **苦手用語TOP 10**: 正答率が低い用語のリスト

### 3.4 レスポンシブデザイン
- **デスクトップ**: 3カラム + サイドバー
- **タブレット**: 2カラム + 折りたたみ可能サイドバー
- **スマホ**: 1カラム + ハンバーガーメニュー

### 3.5 アクセシビリティ
- **キーボードナビゲーション**: 全操作をキーボードで完結
- **フォーカス表示**: 現在位置が明確
- **配色**: WCAG AA準拠のコントラスト比
- **読み上げ対応**: ARIA属性の適切な設定

---

## 4. 機能要件

### 4.1 Phase 1: 辞書機能（MVP）

#### FR-1.1: 用語検索
- **ID**: FR-1.1
- **優先度**: 必須
- **内容**: ユーザーは用語名・説明文・タグで検索できる
- **詳細**:
  - リアルタイム検索（50ms以内に結果更新）
  - あいまい検索対応（Fuse.js使用）
  - ハイライト表示（一致部分を強調）

#### FR-1.2: フィルタリング
- **ID**: FR-1.2
- **優先度**: 必須
- **内容**: カテゴリー・難易度・学習状態で絞り込める
- **詳細**:
  - 複数条件の組み合わせ可能
  - フィルタ状態のURL保存（ブックマーク可能）

#### FR-1.3: 用語詳細表示
- **ID**: FR-1.3
- **優先度**: 必須
- **内容**: 用語の詳細情報をモーダルで表示
- **詳細**:
  - マークダウンレンダリング
  - シンタックスハイライト（Prism.js）
  - 関連タグのリンク

#### FR-1.4: オフライン動作
- **ID**: FR-1.4
- **優先度**: 必須
- **内容**: ネット環境なしで全機能が使用可能
- **詳細**:
  - PWAのサービスワーカー
  - IndexedDBにデータキャッシュ
  - インストール可能（Add to Home Screen）

### 4.2 Phase 2: クイズ機能

#### FR-2.1: クイズ作成
- **ID**: FR-2.1
- **優先度**: 高
- **内容**: 出題範囲と条件を指定してクイズを作成
- **詳細**:
  - ランダム出題
  - カテゴリー指定出題
  - 弱点補強（正答率低い順）

#### FR-2.2: 問題出題
- **ID**: FR-2.2
- **優先度**: 高
- **内容**: カード型UIで問題を表示し、回答を受け取る
- **詳細**:
  - 表: 用語名
  - 裏: 説明・コード例
  - 記憶度の自己評価（0-5段階）

#### FR-2.3: 即時フィードバック
- **ID**: FR-2.3
- **優先度**: 高
- **内容**: 回答後、正誤と詳細説明を即座に表示
- **詳細**:
  - アニメーション効果
  - 所要時間表示
  - 正解の詳細説明

#### FR-2.4: 結果保存
- **ID**: FR-2.4
- **優先度**: 高
- **内容**: クイズ結果をIndexedDBに保存し、統計に反映
- **詳細**:
  - セッション履歴
  - 用語ごとの正答率更新
  - 苦手用語リストの更新

### 4.3 Phase 3: SRS機能

#### FR-3.1: 復習スケジュール管理
- **ID**: FR-3.1
- **優先度**: 高
- **内容**: SM-2アルゴリズムで次回復習日を自動計算
- **詳細**:
  - 記憶度に応じたInterval調整
  - Ease Factorの動的更新
  - 期限切れ復習の優先表示

#### FR-3.2: 復習実行
- **ID**: FR-3.2
- **優先度**: 高
- **内容**: 復習予定の用語をクイズ形式で復習
- **詳細**:
  - クイズモードと同じUI
  - 評価スケール（0-5）で記憶度を自己申告
  - 結果に応じて次回復習日を再計算

#### FR-3.3: 統計ダッシュボード
- **ID**: FR-3.3
- **優先度**: 中
- **内容**: 学習進捗を可視化したダッシュボード
- **詳細**:
  - 習得率（円グラフ）
  - 連続学習日数
  - カテゴリー別理解度（棒グラフ）
  - 復習予定カレンダー

#### FR-3.4: 習得レベル管理
- **ID**: FR-3.4
- **優先度**: 中
- **内容**: 用語ごとに習得レベル（0-4）を管理
- **詳細**:
  - 0: 未学習
  - 1: 認識（見たことある）
  - 2: 理解（意味が分かる）
  - 3: 定着（説明できる）
  - 4: 習得（応用できる）

---

## 5. 非機能要件

### 5.1 性能要件

#### NFR-1: 応答速度
- 検索結果表示: 50ms以内
- 画面遷移: 100ms以内（体感的に瞬時）
- 初回ロード: 3秒以内（Service Worker初期化含む）

#### NFR-2: オフライン性能
- 全機能がオフラインで動作
- データ同期は将来拡張として残す（Phase 4以降）

### 5.2 使いやすさ

#### NFR-3: 学習曲線
- 初回利用で基本操作を理解できる（オンボーディング不要）
- キーボードショートカットはツールチップで表示

#### NFR-4: モバイル対応
- スマホでの快適な操作（タップ領域最低44px）
- スワイプジェスチャー対応

### 5.3 保守性

#### NFR-5: コード品質
- TypeScript strict mode
- ESLint + Prettier
- テストカバレッジ 70%以上

#### NFR-6: ドキュメント
- 主要コンポーネントにJSDoc
- アーキテクチャ図の維持

### 5.4 互換性

#### NFR-7: ブラウザ対応
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

#### NFR-8: デバイス対応
- デスクトップ（1920x1080以上）
- タブレット（768x1024）
- スマートフォン（375x667以上）

---

## 6. 制約事項

### 6.1 技術制約
- **フロントエンドのみ**: バックエンドサーバーは不要（将来拡張として残す）
- **ブラウザ依存**: IndexedDB対応ブラウザが必須
- **データ容量**: 用語数は1000語まで（IndexedDBの現実的な上限）

### 6.2 開発制約
- **開発期間**: Phase 1完成まで 1-2週間
- **単独開発**: 1人での実装を前提
- **学習コスト**: 新技術の学習時間は最小限に

### 6.3 運用制約
- **サーバー不要**: 静的ホスティング（GitHub Pages / Vercel）で運用
- **データ更新**: 用語追加は手動（JSONファイル編集 → ビルド）

---

## 7. 成功基準

### 7.1 Phase 1（辞書）の成功基準
- [ ] 検索結果が50ms以内に表示される
- [ ] オフラインで全機能が動作する
- [ ] 用語詳細が見やすく、コード例がハイライト表示される
- [ ] スマホでも快適に操作できる

### 7.2 Phase 2（クイズ）の成功基準
- [ ] 10問のクイズを5分以内に完了できる
- [ ] 即時フィードバックで学習効果が実感できる
- [ ] 苦手用語が自動で抽出される

### 7.3 Phase 3（SRS）の成功基準
- [ ] 復習スケジュールが自動で管理される
- [ ] 習得率が可視化され、モチベーションが維持される
- [ ] 連続学習日数が表示され、習慣化が促進される

### 7.4 全体の成功基準
- [ ] 初回利用から1週間継続して使われる
- [ ] 習得済み用語が30語以上に達する
- [ ] ユーザーが「これがないと困る」と感じるツールになる

---

## 8. 今後の拡張（Phase 4以降）

### 8.1 データ同期
- クラウドストレージ連携（Google Drive / Dropbox）
- 複数デバイス間での学習履歴同期

### 8.2 用語追加UI
- ユーザーが独自の用語を追加できる管理画面
- Markdown編集エディタ

### 8.3 共有機能
- 学習した用語リストのエクスポート（JSON/CSV）
- 他ユーザーとの用語セット共有

### 8.4 統計機能の拡張
- 学習時間のトラッキング
- 週次・月次レポート
- 目標設定と達成管理

---

**次のステップ**: `.tmp/design.md`（技術設計書）の作成
